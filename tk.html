<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="robots" content="noindex" />
<style type="text/css">
  body {
    margin: 0;
    padding: 0;
  }
</style>
<script src="https://content.jwplatform.com/libraries/KB5zFt7A.js"></script>
<script> jwplayer.key='XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div id="player"></div>
<script type="text/javascript">
  // Variable para almacenar el token
  let token = '';

  // Función para actualizar el token
  async function updateToken() {
    try {
      const response = await fetch('https://api.codetabs.com/v1/proxy/?quest=https://tcnt.golf/json/capturado.json');
      const json = await response.json();
      const newToken = json.token; // Extraer el token del JSON

      // Actualizar la variable de token en el ambiente
      token = newToken;

      // Cargar el reproductor con el token actualizado
      loadPlayer();
    } catch (error) {
      console.error('Error actualizando el token:', error);
    }
  }

  // Actualizar el token al inicio y luego cada 5 minutos
  updateToken();
  setInterval(updateToken, 5 * 60 * 1000); // 5 minutos

  // Función para cargar el reproductor JW Player
  function loadPlayer() {
    const playerInstance = jwplayer("player");
    playerInstance.setup({
      playlist: [{
        "title": "",
        "description": "",
        "image": "#",
        "sources": [
          {
            "default": false,
            "type": "dash",
            "file": token, // Usar el token directamente como URL
            "drm": {
              "clearkey": {
                "keyId": "c4697bf458da52f8b96b36cce761d571",
                "key": "a4dee77615279c858b19e5bb69ab6755"
              }
            },
            "label": "0"
          }
        ]
      }],
      width: "100%",
      height: "100%",
      aspectratio: "16:9",
      autostart: true,
      cast: {},
      sharing: {}
    });
  }
</script>
</body>
</html>
